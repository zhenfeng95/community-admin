(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22f8cc0d"],{"0de9":function(t,e,n){"use strict";n("e317")},"13d5":function(t,e,n){"use strict";var i=n("23e7"),r=n("d58f").left,a=n("a640"),o=n("1212"),s=n("9adc"),l=!s&&o>79&&o<83,c=l||!a("reduce");i({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})},"1a1c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("Card",{attrs:{"dis-hover":!0,shadow:!0}},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.handleSelect}}),e("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("Col",{staticClass:"ctrls"},[e("Button",{on:{click:function(e){return t._deleteErrors()}}},[t._v("批量删除")])],1),e("Col",[e("Page",{attrs:{total:t.total,current:t.page,"page-size":t.limit,"page-size-opts":t.pageArr,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.onPageChange,"on-page-size-change":t.onPageSizeChange}})],1)],1)],1)],1)},r=[],a=n("5530"),o=n("2909"),s=(n("99af"),n("4de4"),n("caad"),n("d81d"),n("13d5"),n("e9f5"),n("910d"),n("ab43"),n("9485"),n("b64b"),n("d3b7"),n("2532"),n("50fc")),l=function(){var t=this,e=t._self._c;return e("div",[e("Row",[e("Col",{attrs:{span:"24"}},[e("p",[t._v("请求路径："+t._s(t.row.path)+" - "+t._s(t.row.method)+" - "+t._s(t.row.code))]),e("br"),e("p",[t._v("请求参数："+t._s(t.row.param))])]),e("Col",{attrs:{span:"24"}},[e("br"),e("p",[t._v("Stack:")]),e("p",[t._v(t._s(t.row.stack))])])],1)],1)},c=[],d={props:{row:{type:Object,default:function(){}}}},u=d,f=n("2877"),h=Object(f["a"])(u,l,c,!1,null,"7faa513d",null),p=h.exports,g=function(){var t=this,e=t._self._c;return e("div",[e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{staticClass:"overtext",attrs:{span:"18"}},[t._v(t._s(t.row.content))]),e("Col",{attrs:{span:"6"}},[e("a",{staticStyle:{"padding-left":"6px"},on:{click:function(e){return t.more()}}},[t._v("更多>>")])])],1)],1)},m=[],v=(n("e9c4"),{props:{row:{type:Object,default:function(){}}},methods:{more:function(){var t=this;this.$Modal.info({title:"详情",render:function(e,n){return e("Input",{props:{type:"textarea",value:JSON.stringify(t.row.param,null,2),rows:16}})}})}}}),w=v,b=(n("0de9"),Object(f["a"])(w,g,m,!1,null,"c9bfbfae",null)),y=b.exports,_=n("5a0c"),k=n.n(_),C={data:function(){var t=this;return{columns:[{type:"expand",key:"stack",width:50,render:function(t,e){return t(p,{props:{row:e.row}})}},{type:"selection",width:60,align:"center"},{title:"错误消息",key:"message",align:"center",minWidth:180},{title:"错误码",key:"code",align:"center",minWidth:120,filters:[],filterMultiple:!1,filterRemote:t.filterHandle},{title:"请求类型",key:"method",align:"center",minWidth:140,filters:[],filterMultiple:!1,filterRemote:t.filterHandle},{title:"请求路径",key:"path",align:"center",minWidth:200},{title:"请求参数",key:"param",minWidth:240,render:function(t,e){return t(y,{props:{row:e.row}})}},{title:"日期",key:"created",align:"center",minWidth:180,render:function(t,e){return t("div",[t("span",k()(e.row.created).format("YYYY-MM-DD HH:mm:ss"))])}},{title:"用户",key:"username",align:"center",minWidth:120}],data:[],filters:{},page:1,limit:10,total:0,pageArr:[10,20,30,50,100],loading:!0,selection:[]}},mounted:function(){this._getErrorList()},watch:{filters:function(t,e){this._getErrorList()}},methods:{_deleteErrors:function(){var t=this,e=this.selection;0!==e.length?this.$Modal.confirm({title:"确认删除",content:"确定要删除已选中的错误消息吗？",onOk:function(){var n=e.reduce((function(t,e){return[].concat(Object(o["a"])(t),[e._id])}),[]);s["b"].use("delete",{ids:n}).then((function(e){0===e.code?(t.data=t.data.filter((function(t){if(!n.includes(t._id))return t})),t.$Message.success("删除成功！")):t.$Message.error("删除失败，请联系管理员！")}))}}):this.$Modal.error({title:"错误",content:"请选择要删除的错误消息"})},filterHandle:function(t,e){var n=Object(a["a"])({},this.filters);t[0]?n[e]=t[0]:delete n[e],this.filters=n},_getErrorList:function(){var t=this;s["b"].use("get",{page:this.page,limit:this.limit,filter:this.filters||{}}).then((function(e){t.data=e.data,t.total=e.total,t.loading=!1;var n=Object.keys(e.filters);t.columns.map((function(t){n.includes(t.key)&&0===t.filters.length&&(t.filters=e.filters[t.key])}))}))},onPageChange:function(t){this.globalFilters.page.num=t},onPageSizeChange:function(t){this.globalFilters.page.limit=t},handleSetBatch:function(){0!==this.selection.length?this.showSet=!0:this.$Message.info("请选择需要设置的数据！")},exportData:function(){this.$refs.table.exportCsv({filename:"table-".concat((new Date).valueOf(),".csv"),columns:this.columns1.filter((function(t,e){return e>=0})),data:this.data.filter((function(t,e){return e>=0}))})},handleSelect:function(t){this.selection=t}}},R=C,M=(n("38fc"),Object(f["a"])(R,i,r,!1,null,null,null));e["default"]=M.exports},"38fc":function(t,e,n){"use strict";n("78c3")},"50fc":function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return h}));var i=n("6b6c"),r=n("d4ec"),a=n("bee2"),o=(n("d9e2"),n("14d9"),n("a434"),function(){function t(e){Object(r["a"])(this,t),this.url=e}return Object(a["a"])(t,[{key:"use",value:function(t,e){var n=this.url[t];if(!n)throw new Error("参数正确，请检查API方法定义");return n.length>2?n.splice(-1,1,e):n.push(e),i["b"].apply(this,n)}}])}()),s=o,l=new s({get:["/v1/admin/users","get"],update:["/v1/admin/updateUser","post"],batch:["/v1/admin/updateUserSettings","post"],delete:["/v1/admin/deleteUser","post"],check:["/v1/admin/checkname","get"],add:["/v1/admin/addUser","post"]}),c=new s({add:["/v1/admin/addMenu","post"],get:["/v1/admin/getMenu","get"],update:["/v1/admin/updateMenu","post"],delete:["/v1/admin/deleteMenu","post"],route:["/v1/admin/getRoutes","get"]}),d=new s({add:["/v1/admin/addRole","post"],get:["/v1/admin/getRoles","get"],roles:["/v1/admin/getRolesNames","get"],update:["/v1/admin/updateRole","post"],delete:["/v1/admin/deleteRole","post"]}),u=new s({get:["/v1/admin/getError","get"],delete:["/v1/admin/deleteError","post"]}),f=new s({get:["/v1/admin/getComments","get"],batch:["/v1/admin/updateCommentsBatch","post"],delete:["/v1/admin/deleteComments","post"]}),h=function(){return i["a"].get("/v1/admin/getstat")}},"78c3":function(t,e,n){},9485:function(t,e,n){"use strict";var i=n("23e7"),r=n("2266"),a=n("59ed"),o=n("825a"),s=n("46c4"),l=n("2a62"),c=n("f99f"),d=n("2ba4"),u=n("d039"),f=TypeError,h=u((function(){[].keys().reduce((function(){}),void 0)})),p=!h&&c("reduce",f);i({target:"Iterator",proto:!0,real:!0,forced:h||p},{reduce:function(t){o(this);try{a(t)}catch(u){l(this,"throw",u)}var e=arguments.length<2,n=e?void 0:arguments[1];if(p)return d(p,this,e?[t]:[t,n]);var i=s(this),c=0;if(r(i,(function(i){e?(e=!1,n=i):n=t(n,i,c),c++}),{IS_RECORD:!0}),e)throw new f("Reduce of empty iterator with no initial value");return n}})},d58f:function(t,e,n){"use strict";var i=n("59ed"),r=n("7b0b"),a=n("44ad"),o=n("07fa"),s=TypeError,l="Reduce of empty array with no initial value",c=function(t){return function(e,n,c,d){var u=r(e),f=a(u),h=o(u);if(i(n),0===h&&c<2)throw new s(l);var p=t?h-1:0,g=t?-1:1;if(c<2)while(1){if(p in f){d=f[p],p+=g;break}if(p+=g,t?p<0:h<=p)throw new s(l)}for(;t?p>=0:h>p;p+=g)p in f&&(d=n(d,f[p],p,u));return d}};t.exports={left:c(!1),right:c(!0)}},e317:function(t,e,n){}}]);
//# sourceMappingURL=chunk-22f8cc0d.cf0accb8.js.map