(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f2ed5c"],{"0869":function(e,t,n){"use strict";n("ec9f")},2366:function(e,t){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);function r(e,t){var o=t||0,r=n;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}e.exports=r},"50fc":function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p}));var o=n("6b6c"),r=n("d4ec"),a=n("bee2"),s=(n("d9e2"),n("14d9"),n("a434"),function(){function e(t){Object(r["a"])(this,e),this.url=t}return Object(a["a"])(e,[{key:"use",value:function(e,t){var n=this.url[e];if(!n)throw new Error("参数正确，请检查API方法定义");return n.length>2?n.splice(-1,1,t):n.push(t),o["b"].apply(this,n)}}])}()),i=s,d=new i({get:["/v1/admin/users","get"],update:["/v1/admin/updateUser","post"],batch:["/v1/admin/updateUserSettings","post"],delete:["/v1/admin/deleteUser","post"],check:["/v1/admin/checkname","get"],add:["/v1/admin/addUser","post"]}),u=new i({add:["/v1/admin/addMenu","post"],get:["/v1/admin/getMenu","get"],update:["/v1/admin/updateMenu","post"],delete:["/v1/admin/deleteMenu","post"],route:["/v1/admin/getRoutes","get"]}),c=new i({add:["/v1/admin/addRole","post"],get:["/v1/admin/getRoles","get"],roles:["/v1/admin/getRolesNames","get"],update:["/v1/admin/updateRole","post"],delete:["/v1/admin/deleteRole","post"]}),l=new i({get:["/v1/admin/getError","get"],delete:["/v1/admin/deleteError","post"]}),m=new i({get:["/v1/admin/getComments","get"],batch:["/v1/admin/updateCommentsBatch","post"],delete:["/v1/admin/deleteComments","post"]}),p=function(){return o["a"].get("/v1/admin/getstat")}},9906:function(e,t,n){"use strict";n("d45e")},c64e:function(e,t,n){var o=n("e1f4"),r=n("2366");function a(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var i=0;i<16;++i)t[a+i]=s[i];return t||r(s)}e.exports=a},d45e:function(e,t,n){},e1f4:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);e.exports=function(){return n(o),o}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},e49c:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-con"},[t("Card",{attrs:{icon:"log-in",title:"欢迎登录",bordered:!1}},[t("div",{staticClass:"form-con"},[t("login-form",{attrs:{loading:e.loading},on:{"on-success-valid":e.handleSubmit}})],1)])],1)])},r=[],a=n("5530"),s=(n("99af"),n("caad"),n("d81d"),n("14d9"),n("e9f5"),n("ab43"),n("d3b7"),n("2532"),function(){var e=this,t=e._self._c;return t("Form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}}},[t("FormItem",{attrs:{prop:"username"}},[t("Input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),t("FormItem",{attrs:{prop:"code"}},[t("Input",{staticClass:"imooc-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"md-image"}})],1),t("span",{staticClass:"imooc-code",attrs:{slot:"append"},domProps:{innerHTML:e._s(e.svg)},on:{click:function(t){return e._getCode()}},slot:"append"})])],1),t("FormItem",[t("Button",{attrs:{loading:e.loading,type:"primary",long:""},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)}),i=[],d=n("7ded"),u=n("c64e"),c=n.n(u),l={name:"LoginForm",props:{userNameRules:{type:Array,default:function(){return[{required:!0,message:"账号不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"change"}]}},passwordRules:{type:Array,default:function(){return[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码至少为6位",trigger:"change"}]}},codeRules:{type:Array,default:function(){return[{required:!0,message:"验证码不能为空",trigger:"blur"},{type:"string",len:4,message:"验证码长度不正确",trigger:"change"}]}},loading:{type:Boolean,default:!1}},data:function(){return{svg:"",form:{username:"285273676@qq.com",password:"251611",code:"",sid:""}}},computed:{rules:function(){return{username:this.userNameRules,password:this.passwordRules,code:this.codeRules}}},mounted:function(){var e="";localStorage.getItem("sid")?e=localStorage.getItem("sid"):(e=c()(),localStorage.setItem("sid",e)),this.$store.commit("setSid",e),this.form.sid=e,this._getCode()},methods:{handleSubmit:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$emit("on-success-valid",Object(a["a"])({},e.form))}))},_getCode:function(){var e=this;Object(d["a"])(this.$store.state.sid).then((function(t){0===t.code&&(e.svg=t.data)}))}}},m=l,p=(n("0869"),n("2877")),f=Object(p["a"])(m,s,i,!1,null,null,null),g=f.exports,v=g,h=n("2f62"),b=n("50fc"),y=n("1d38"),w=n("3a31"),R=n("a18c"),O=n("c276"),j=n("ddb9"),k={components:{LoginForm:v},data:function(){return{loading:!1}},methods:Object(a["a"])(Object(a["a"])({},Object(h["b"])(["handleLogin","getUserInfo"])),{},{handleSubmit:function(e){var t=this;this.loading=!0,this.handleLogin(e).then((function(e){if(console.log("handleSubmit -> res",e),t.loading=!1,0===e.code){var n=e.data.roles;if(n.includes("super_admin")){Object(R["b"])();var o=y["a"];return t.$router.addRoutes(o),t.$store.commit("setRouters",o.concat(j["a"])),void t.$router.push({name:t.$config.homeName})}b["d"].use("route").then((function(e){if(0===e.code){var n=e.data;Object(O["q"])("routes",e.data);var o=Object(O["l"])(n),r=Object(O["b"])(y["a"],o);r.map((function(e){"string"===typeof e.component&&(e.component=Object(w["a"])(e.component)),e.children&&e.children.length>0&&e.children.map((function(e){"string"===typeof e.component&&(e.component=Object(w["a"])(e.component))}))})),Object(R["b"])(),t.$router.addRoutes(r),t.$store.commit("setRouters",r.concat(j["a"])),t.$router.push({name:t.$config.homeName})}}))}else t.$Message.error(e.msg)}))}})},C=k,$=(n("9906"),Object(p["a"])(C,o,r,!1,null,null,null));t["default"]=$.exports},ec9f:function(e,t,n){}}]);
//# sourceMappingURL=chunk-31f2ed5c.c75b031c.js.map