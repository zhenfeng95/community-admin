{"version":3,"sources":["webpack:///./src/components/login-form/login-form.vue?7cd6","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/libs/dispatch.js","webpack:///./src/api/admin.js","webpack:///./src/view/login/login.vue?0e3f","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./src/view/login/login.vue","webpack:///./src/components/login-form/login-form.vue","webpack:///src/components/login-form/login-form.vue","webpack:///./src/components/login-form/login-form.vue?7958","webpack:///./src/components/login-form/login-form.vue?82c9","webpack:///./src/components/login-form/index.js","webpack:///src/view/login/login.vue","webpack:///./src/view/login/login.vue?790b","webpack:///./src/view/login/login.vue?fe7c"],"names":["byteToHex","i","toString","substr","bytesToUuid","buf","offset","bth","join","module","exports","Dispatch","url","_classCallCheck","this","_createClass","key","value","todo","dataset","args","Error","length","splice","push","request","apply","userDispatch","get","update","batch","delete","check","add","menuDispatch","route","roleDispatch","roles","errorDispatch","commentsDispatch","getStatData","axios","rng","v4","options","Array","rnds","random","ii","getRandomValues","crypto","bind","window","msCrypto","rnds8","Uint8Array","r","Math","render","_vm","_c","_self","staticClass","attrs","loading","on","handleSubmit","staticRenderFns","ref","form","rules","nativeOn","$event","type","indexOf","_k","keyCode","arguments","model","username","callback","$$v","$set","expression","slot","password","code","domProps","_s","svg","_getCode","_v","name","props","userNameRules","default","required","message","trigger","passwordRules","min","codeRules","len","Boolean","data","sid","computed","mounted","localStorage","getItem","uuid","setItem","$store","commit","methods","_this","$refs","loginForm","validate","valid","$emit","_objectSpread","_this2","getCode","state","then","res","component","LoginForm","components","mapActions","handleLogin","console","log","includes","resetRouter","newRoutes","communityRoutes","$router","addRoutes","concat","routes","$config","homeName","use","routesData","localSave","routesName","getRoutesName","filterRoutes","map","item","_import","children","$Message","error","msg"],"mappings":"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","file":"js/chunk-31f2ed5c.c75b031c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login-form.vue?vue&type=style&index=0&id=91d13194&prod&lang=scss\"","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import { request } from '@/libs/request'\n\nclass Dispatch {\n    constructor(url) {\n        this.url = url\n    }\n\n    use(todo, dataset) {\n        const args = this.url[todo]\n        if (!args) {\n            throw new Error('参数正确，请检查API方法定义')\n        }\n        // args[2] = dataset\n        if (args.length > 2) {\n            args.splice(-1, 1, dataset)\n        } else {\n            args.push(dataset)\n        }\n        return request.apply(this, args)\n    }\n}\n\nexport default Dispatch\n","import { axios } from '@/libs/request'\nimport Dispatch from '../libs/dispatch'\n\n// 获取用户列表\n// const getUserList = (params) => axios.get('/admin/users?' + qs.stringify(params))\n// const updateUserById = (data) => axios.post('/admin/update-user', data)\n// const updateUserBatchById = (data) => axios.post('/admin/update-user-settings', data)\n// const deleteUserById = (ids) => axios.post('/admin/delete-user', { ids })\n// const checkUsername = (username) => axios.get('/admin/checkname?username=' + username)\n// const addUser = (data) => axios.post('/admin/add-user', data)\nexport const userDispatch = new Dispatch({\n    get: ['/v1/admin/users', 'get'],\n    update: ['/v1/admin/updateUser', 'post'],\n    batch: ['/v1/admin/updateUserSettings', 'post'],\n    delete: ['/v1/admin/deleteUser', 'post'],\n    check: ['/v1/admin/checkname', 'get'],\n    add: ['/v1/admin/addUser', 'post']\n})\n\n// const addMenu = (data) => axios.post('/admin/add-menu', data)\n// const getMenu = () => axios.get('/admin/get-menu')\n// const updateMenu = (data) => axios.post('/admin/update-menu', data)\n// const deleteMenu = (data) => axios.post('/admin/delete-menu', data)\nexport const menuDispatch = new Dispatch({\n    add: ['/v1/admin/addMenu', 'post'],\n    get: ['/v1/admin/getMenu', 'get'],\n    update: ['/v1/admin/updateMenu', 'post'],\n    delete: ['/v1/admin/deleteMenu', 'post'],\n    route: ['/v1/admin/getRoutes', 'get']\n})\n\n// const addRole = (data) => axios.post('/admin/add-role', data)\n// const getRoles = () => axios.get('/admin/get-roles')\n// const getRoleNames = () => axios.get('/admin/get-roles-names')\n// const updateRole = (data) => axios.post('/admin/update-role', data)\n// const deleteRole = (data) => axios.post('/admin/delete-role', data)\nexport const roleDispatch = new Dispatch({\n    add: ['/v1/admin/addRole', 'post'],\n    get: ['/v1/admin/getRoles', 'get'],\n    roles: ['/v1/admin/getRolesNames', 'get'],\n    update: ['/v1/admin/updateRole', 'post'],\n    delete: ['/v1/admin/deleteRole', 'post']\n})\n\n// const getErrorList = (params) =>\n//   axios.get('/admin/get-error?' + qs.stringify(params))\n// const deleteErrors = (data) => axios.post('/admin/delete-error', data)\nexport const errorDispatch = new Dispatch({\n    get: ['/v1/admin/getError', 'get'],\n    delete: ['/v1/admin/deleteError', 'post']\n})\n\n// 封装一层，更加简练\nexport const commentsDispatch = new Dispatch({\n    get: ['/v1/admin/getComments', 'get'],\n    // update: ['/admin/updateComments', 'post'],\n    batch: ['/v1/admin/updateCommentsBatch', 'post'],\n    delete: ['/v1/admin/deleteComments', 'post']\n})\n\nexport const getStatData = () => axios.get('/v1/admin/getstat')\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login.vue?vue&type=style&index=0&id=744cc61b&prod&lang=less\"","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-con\"},[_c('Card',{attrs:{\"icon\":\"log-in\",\"title\":\"欢迎登录\",\"bordered\":false}},[_c('div',{staticClass:\"form-con\"},[_c('login-form',{attrs:{\"loading\":_vm.loading},on:{\"on-success-valid\":_vm.handleSubmit}})],1)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Form',{ref:\"loginForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSubmit.apply(null, arguments)}}},[_c('FormItem',{attrs:{\"prop\":\"username\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":16,\"type\":\"ios-person\"}})],1)])],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":14,\"type\":\"md-lock\"}})],1)])],1),_c('FormItem',{attrs:{\"prop\":\"code\"}},[_c('Input',{staticClass:\"imooc-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":14,\"type\":\"md-image\"}})],1),_c('span',{staticClass:\"imooc-code\",attrs:{\"slot\":\"append\"},domProps:{\"innerHTML\":_vm._s(_vm.svg)},on:{\"click\":function($event){return _vm._getCode()}},slot:\"append\"})])],1),_c('FormItem',[_c('Button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\",\"long\":\"\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"登录\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <Form\n        ref=\"loginForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        @keydown.enter.native=\"handleSubmit\"\n    >\n        <FormItem prop=\"username\">\n            <Input v-model=\"form.username\" placeholder=\"请输入用户名\">\n                <span slot=\"prepend\">\n                    <Icon :size=\"16\" type=\"ios-person\"></Icon>\n                </span>\n            </Input>\n        </FormItem>\n        <FormItem prop=\"password\">\n            <Input\n                type=\"password\"\n                v-model=\"form.password\"\n                placeholder=\"请输入密码\"\n            >\n                <span slot=\"prepend\">\n                    <Icon :size=\"14\" type=\"md-lock\"></Icon>\n                </span>\n            </Input>\n        </FormItem>\n        <FormItem prop=\"code\">\n            <Input\n                class=\"imooc-input\"\n                type=\"text\"\n                v-model=\"form.code\"\n                placeholder=\"请输入验证码\"\n            >\n                <span slot=\"prepend\">\n                    <Icon :size=\"14\" type=\"md-image\"></Icon>\n                </span>\n                <span\n                    class=\"imooc-code\"\n                    slot=\"append\"\n                    v-html=\"svg\"\n                    @click=\"_getCode()\"\n                ></span>\n            </Input>\n        </FormItem>\n        <FormItem>\n            <Button :loading=\"loading\" @click=\"handleSubmit\" type=\"primary\" long\n                >登录</Button\n            >\n        </FormItem>\n    </Form>\n</template>\n<script>\n// import axios from '@/libs/request'\nimport { getCode } from '@/api/login'\nimport uuid from 'uuid/v4'\nexport default {\n    name: 'LoginForm',\n    props: {\n        userNameRules: {\n            type: Array,\n            default: () => {\n                return [\n                    {\n                        required: true,\n                        message: '账号不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        type: 'email',\n                        message: '邮箱格式不正确',\n                        trigger: 'change'\n                    }\n                ]\n            }\n        },\n        passwordRules: {\n            type: Array,\n            default: () => {\n                return [\n                    {\n                        required: true,\n                        message: '密码不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        type: 'string',\n                        min: 6,\n                        message: '密码至少为6位',\n                        trigger: 'change'\n                    }\n                ]\n            }\n        },\n        codeRules: {\n            type: Array,\n            default: () => {\n                return [\n                    {\n                        required: true,\n                        message: '验证码不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        type: 'string',\n                        len: 4,\n                        message: '验证码长度不正确',\n                        trigger: 'change'\n                    }\n                ]\n            }\n        },\n        loading: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            svg: '',\n            form: {\n                username: '285273676@qq.com',\n                password: '251611',\n                code: '',\n                sid: ''\n            }\n        }\n    },\n    computed: {\n        rules() {\n            return {\n                username: this.userNameRules,\n                password: this.passwordRules,\n                code: this.codeRules\n            }\n        }\n    },\n    mounted() {\n        let sid = ''\n        if (localStorage.getItem('sid')) {\n            sid = localStorage.getItem('sid')\n        } else {\n            sid = uuid()\n            localStorage.setItem('sid', sid)\n        }\n        this.$store.commit('setSid', sid)\n        this.form.sid = sid\n        this._getCode()\n    },\n    methods: {\n        handleSubmit() {\n            this.$refs.loginForm.validate((valid) => {\n                if (valid) {\n                    this.$emit('on-success-valid', { ...this.form })\n                }\n            })\n        },\n        _getCode() {\n            getCode(this.$store.state.sid).then((res) => {\n                if (res.code === 0) {\n                    this.svg = res.data\n                }\n            })\n        }\n    }\n}\n</script>\n<style lang=\"scss\">\n.imooc-input {\n    .ivu-input-group-append {\n        padding: 0;\n    }\n    .ivu-input-group-prepend {\n        width: 32px;\n    }\n}\n\n.imooc-code {\n    display: inline-block;\n    padding: 0;\n    height: 28px;\n    overflow: hidden;\n    svg {\n        width: 120px;\n        position: relative;\n        top: -12px;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login-form.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login-form.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./login-form.vue?vue&type=template&id=91d13194\"\nimport script from \"./login-form.vue?vue&type=script&lang=js\"\nexport * from \"./login-form.vue?vue&type=script&lang=js\"\nimport style0 from \"./login-form.vue?vue&type=style&index=0&id=91d13194&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import LoginForm from './login-form.vue'\nexport default LoginForm\n","<style lang=\"less\">\n@import './login.less';\n</style>\n\n<template>\n    <div class=\"login\">\n        <div class=\"login-con\">\n            <Card icon=\"log-in\" title=\"欢迎登录\" :bordered=\"false\">\n                <div class=\"form-con\">\n                    <login-form\n                        :loading=\"loading\"\n                        @on-success-valid=\"handleSubmit\"\n                    ></login-form>\n                </div>\n            </Card>\n        </div>\n    </div>\n</template>\n\n<script>\nimport LoginForm from '_c/login-form'\nimport { mapActions } from 'vuex'\nimport { menuDispatch } from '@/api/admin'\nimport communityRoutes from '@/router/community'\nimport _import from '@/libs/_import'\nimport { resetRouter } from '@/router'\nimport { filterRoutes, getRoutesName, localSave } from '@/libs/util'\nimport routes from '@/router/routers'\n\nexport default {\n    components: {\n        LoginForm\n    },\n    data() {\n        return {\n            loading: false\n        }\n    },\n    methods: {\n        ...mapActions(['handleLogin', 'getUserInfo']),\n        handleSubmit(options) {\n            this.loading = true\n            this.handleLogin(options).then((res) => {\n                console.log('handleSubmit -> res', res)\n                this.loading = false\n                if (res.code === 0) {\n                    const roles = res.data.roles\n                    if (roles.includes('super_admin')) {\n                        // 说明是超级管理用户\n                        resetRouter()\n                        const newRoutes = communityRoutes\n                        this.$router.addRoutes(newRoutes)\n                        // 设置store中的router规则\n                        this.$store.commit(\n                            'setRouters',\n                            newRoutes.concat(routes)\n                        )\n                        this.$router.push({\n                            name: this.$config.homeName\n                        })\n                        return\n                    }\n                    // 用户登录成功之后，获取菜单数据\n                    menuDispatch.use('route').then((res) => {\n                        if (res.code === 0) {\n                            const routesData = res.data\n                            localSave('routes', res.data)\n                            const routesName = getRoutesName(routesData)\n                            const newRoutes = filterRoutes(\n                                communityRoutes,\n                                routesName\n                            )\n                            // const newRoutes = communityRoutes.filter((item) => routesName.includes(item.name))\n                            // 动态设置路由\n                            // addRoutes\n                            newRoutes.map((item) => {\n                                if (typeof item.component === 'string') {\n                                    item.component = _import(item.component)\n                                }\n                                if (item.children && item.children.length > 0) {\n                                    item.children.map((i) => {\n                                        if (typeof i.component === 'string') {\n                                            i.component = _import(i.component)\n                                        }\n                                    })\n                                }\n                            })\n                            resetRouter()\n                            this.$router.addRoutes(newRoutes)\n                            // 设置store中的router规则\n                            this.$store.commit(\n                                'setRouters',\n                                newRoutes.concat(routes)\n                            )\n                            this.$router.push({\n                                name: this.$config.homeName\n                            })\n                        }\n                    })\n                } else {\n                    this.$Message.error(res.msg)\n                }\n                // this.getUserInfo().then((res) => {\n                //   this.$router.push({\n                //     name: this.$config.homeName\n                //   })\n                // })\n            })\n        }\n    }\n}\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=744cc61b\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=744cc61b&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}