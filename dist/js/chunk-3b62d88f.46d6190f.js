(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b62d88f"],{"127f":function(t,e,a){"use strict";a("8f51")},"129f":function(t,e,a){"use strict";t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}},"2a42":function(t,e,a){"use strict";a("9ee6")},"30d9":function(t,e,a){},"50fc":function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"a",(function(){return h})),a.d(e,"c",(function(){return m}));var n=a("6b6c"),i=a("d4ec"),o=a("bee2"),s=(a("d9e2"),a("14d9"),a("a434"),function(){function t(e){Object(i["a"])(this,t),this.url=e}return Object(o["a"])(t,[{key:"use",value:function(t,e){var a=this.url[t];if(!a)throw new Error("参数正确，请检查API方法定义");return a.length>2?a.splice(-1,1,e):a.push(e),n["b"].apply(this,a)}}])}()),l=s,r=new l({get:["/v1/admin/users","get"],update:["/v1/admin/updateUser","post"],batch:["/v1/admin/updateUserSettings","post"],delete:["/v1/admin/deleteUser","post"],check:["/v1/admin/checkname","get"],add:["/v1/admin/addUser","post"]}),c=new l({add:["/v1/admin/addMenu","post"],get:["/v1/admin/getMenu","get"],update:["/v1/admin/updateMenu","post"],delete:["/v1/admin/deleteMenu","post"],route:["/v1/admin/getRoutes","get"]}),u=new l({add:["/v1/admin/addRole","post"],get:["/v1/admin/getRoles","get"],roles:["/v1/admin/getRolesNames","get"],update:["/v1/admin/updateRole","post"],delete:["/v1/admin/deleteRole","post"]}),d=new l({get:["/v1/admin/getError","get"],delete:["/v1/admin/deleteError","post"]}),h=new l({get:["/v1/admin/getComments","get"],batch:["/v1/admin/updateCommentsBatch","post"],delete:["/v1/admin/deleteComments","post"]}),m=function(){return n["a"].get("/v1/admin/getstat")}},"6eab":function(t,e,a){"use strict";a("9ed3")},"841c":function(t,e,a){"use strict";var n=a("c65b"),i=a("d784"),o=a("825a"),s=a("861d"),l=a("1d80"),r=a("129f"),c=a("577e"),u=a("dc4a"),d=a("14c3");i("search",(function(t,e,a){return[function(e){var a=l(this),i=s(e)?u(e,t):void 0;return i?n(i,e,a):new RegExp(e)[t](c(a))},function(t){var n=o(this),i=c(t),s=a(e,n,i);if(s.done)return s.value;var l=n.lastIndex;r(l,0)||(n.lastIndex=0);var u=d(n,i);return r(n.lastIndex,l)||(n.lastIndex=l),null===u?-1:u.index}]}))},"857a":function(t,e,a){"use strict";var n=a("e330"),i=a("1d80"),o=a("577e"),s=/"/g,l=n("".replace);t.exports=function(t,e,a,n){var r=o(i(t)),c="<"+e;return""!==a&&(c+=" "+a+'="'+l(o(n),s,"&quot;")+'"'),c+">"+r+"</"+e+">"}},8608:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{span:"6",sm:24,md:9,lg:6}},[e("Card",{attrs:{"dis-hover":!0,shadow:!0}},[e("TreeMenu",{attrs:{isEdit:t.isEdit,menu:t.menuData},on:{addMenuEvent:t.addMenu,editMenuEvent:t.editMenu,deleteMenuEvent:t.deleteMenu,"on-select":t.handleTreeChange}})],1)],1),e("Col",{attrs:{span:"18",sm:24,md:15,lg:18}},[e("Card",{staticStyle:{"margin-bottom":"10px"},attrs:{title:t.$t("Menu Options"),icon:"ios-options","dis-hover":!0,shadow:!0}},[e("MenuForm",{attrs:{formData:t.formData,isEdit:t.isEdit,selectNode:t.selectNode},on:{cancel:t.initForm,submit:t.submit}})],1),e("Card",{attrs:{title:t.$t("resources"),"dis-hover":!0,shadow:!0}},[e("OperationsTable",{attrs:{columns:t.columns,tableData:t.tableData,isEdit:t.isEdit},on:{"on-change":t.handleTableChange}})],1)],1)],1)],1)},i=[],o=a("2909"),s=(a("99af"),a("14d9"),function(){var t=this,e=t._self._c;return e("div",[e("Row",{attrs:{type:"flex",align:"middle",justify:"center"}},[e("ButtonGroup",{staticClass:"imooc-btn-group",class:{editing:t.isEdit}},[e("Button",{attrs:{size:"small",disabled:t.isEdit}},[e("Dropdown",{on:{"on-click":t.addMenu}},[e("a",{attrs:{href:"javascript:void(0)"}},[e("Icon",{attrs:{type:"md-add"}}),e("span",{staticClass:"imooc-dropdown"},[t._v("新增")])],1),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:"bro"}},[t._v("兄弟节点")]),e("DropdownItem",{attrs:{name:"child",disabled:0===t.menuData.length}},[t._v("子节点")])],1)],1)],1),e("Button",{attrs:{size:"small",icon:"ios-create",type:"primary",disabled:t.isEdit},on:{click:function(e){return t.editMenu()}}},[t._v("修改")]),e("Button",{attrs:{size:"small",icon:"md-trash",type:"error",disabled:t.isEdit},on:{click:function(e){return t.deleteMenu()}}},[t._v("删除")])],1)],1),e("Tree",{ref:"tree",attrs:{data:t.menuData},on:{"on-select-change":t.handleTreeChange}})],1)}),l=[],r=a("5530"),c={props:{isEdit:{type:Boolean,default:!1},menu:{type:Array,default:function(){return[]}}},data:function(){return{selectNode:[]}},methods:{addMenu:function(t){this.selectNode.length>0||0===this.menuData.length?this.$emit("addMenuEvent",t):this.$Message.error("请选择菜单节点后再添加！")},editMenu:function(){this.selectNode.length>0?this.$emit("editMenuEvent",Object(r["a"])({},this.selectNode[0])):this.$Message.error("请选择菜单节点后再编辑！")},handleTreeChange:function(t){this.selectNode=t,this.$emit("on-select",t)},deleteMenu:function(){var t=this;this.selectNode.length>0||0===this.menuData.length?this.$Modal.confirm({title:"确定删除吗？",content:"删除".concat(this.selectNode[0].title,"的菜单项吗？"),onOk:function(){t.$emit("deleteMenuEvent",t.selectNode[0]),t.selectNode=[]}}):this.$Message.error("请选择菜单节点后再进行删除！")}},computed:{menuData:function(){return this.menu}}},u=c,d=(a("127f"),a("2877")),h=Object(d["a"])(u,s,l,!1,null,null,null),m=h.exports,p=(a("4e82"),a("b0c0"),a("9911"),function(){var t=this,e=t._self._c;return e("div",[e("Form",{ref:"form",attrs:{disabled:!t.isEdit,model:t.formData,rules:t.formRules,"label-width":80}},[e("FormItem",{attrs:{label:"菜单标题",prop:"title"}},[e("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),e("FormItem",{attrs:{label:"路径",prop:"path"}},[e("Input",{attrs:{placeholder:"请输入菜单路由"},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1),e("FormItem",{attrs:{label:"菜单类型"}},[e("Select",{attrs:{placeholder:"请选择菜单类型"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[e("Option",{attrs:{value:"menu"}},[t._v("目录")]),e("Option",{attrs:{value:"resouce"}},[t._v("资源")]),e("Option",{attrs:{value:"link"}},[t._v("链接")])],1)],1),"link"!==t.formData.type?[e("FormItem",{attrs:{label:"组件名称",prop:"name"}},[e("Input",{attrs:{placeholder:"请输入组件名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("FormItem",{attrs:{label:"组件"}},[e("Input",{attrs:{placeholder:"请输入前端组件名称"},model:{value:t.formData.component,callback:function(e){t.$set(t.formData,"component",e)},expression:"formData.component"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("()=>import('@")]),e("span",{attrs:{slot:"append"},slot:"append"},[t._v(".vue')")])])],1),e("FormItem",{attrs:{label:"面包屑"}},[t._v(" 不显示 "),e("i-switch",{model:{value:t.formData.hideInBread,callback:function(e){t.$set(t.formData,"hideInBread",e)},expression:"formData.hideInBread"}}),t._v("显示 ")],1),e("FormItem",{attrs:{label:"菜单显示"}},[t._v(" 不显示 "),e("i-switch",{model:{value:t.formData.hideInMenu,callback:function(e){t.$set(t.formData,"hideInMenu",e)},expression:"formData.hideInMenu"}}),t._v("显示 ")],1),e("FormItem",{attrs:{label:"页面缓存"}},[t._v(" 是 "),e("i-switch",{model:{value:t.formData.notCache,callback:function(e){t.$set(t.formData,"notCache",e)},expression:"formData.notCache"}}),t._v("否 ")],1)]:[e("FormItem",{attrs:{label:"链接"}},[e("Input",{attrs:{placeholder:"请输入跳转链接"},model:{value:t.formData.link,callback:function(e){t.$set(t.formData,"link",e)},expression:"formData.link"}})],1)],e("FormItem",{attrs:{label:"排序"}},[e("Input",{attrs:{placeholder:"组件默认排序"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),e("FormItem",{attrs:{label:"图标"}},[e("Input",{attrs:{placeholder:"请输入前端组件名称"},model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}})],1),e("FormItem",{attrs:{label:"重定向"}},[e("Input",{attrs:{placeholder:"重定向组件"},model:{value:t.formData.redirect,callback:function(e){t.$set(t.formData,"redirect",e)},expression:"formData.redirect"}})],1),t.isEdit?e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1):t._e()],2)],1)}),f=[],v={props:{isEdit:{type:Boolean,default:!1},formData:{type:Object,default:function(){}}},data:function(){return{formRules:{title:[{required:!0,message:"菜单名称不得为空",trigger:"blur"}],name:[{required:!0,message:"组件名称不得为空",trigger:"blur"}],path:[{required:!0,message:"路由路径不得为空",trigger:"blur"}],component:[{required:!0,message:"前端组件不得为空",trigger:"blur"}]}}},methods:{submit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=Object(r["a"])(Object(r["a"])({},t.formData),{},{expand:!0});t.$emit("submit",a),t.initFields()}else t.$Message.error("请检验表单数据！")}))},cancel:function(){this.initFields()},initFields:function(){this.$emit("cancel"),this.$refs.form.resetFields()},setMenu:function(t){this.$emit("submit",t)}}},g=v,b=Object(d["a"])(g,p,f,!1,null,"b2afe922",null),y=b.exports,D=function(){var t=this,e=t._self._c;return e("div",[e("tables",{ref:"tables",attrs:{searchable:"","search-place":"top",columns:t.columns},on:{"on-row-edit":t.handleRowEdit,"on-row-remove":t.handleRowRemove,"on-selection-change":t.handleSelect,searchEvent:t.handleSearch},scopedSlots:t._u([{key:"table-header",fn:function(){return[t.isEdit?e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[e("Icon",{attrs:{type:"md-person-add"}}),t._v("  添加 ")],1):t._e()]},proxy:!0}]),model:{value:t.localData,callback:function(e){t.localData=e},expression:"localData"}}),e("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t.isEdit?e("Col",{staticClass:"ctrls"},[e("Button",{on:{click:function(e){return t.handleDeleteBatch()}}},[t._v("批量删除")]),e("Button",{on:{click:function(e){return t.handleSetBatch()}}},[t._v("批量设置")])],1):t._e(),e("Col",[t.total.length>0?e("Page",{attrs:{total:t.total,current:t.page,"page-size":t.limit,"page-size-opts":t.pageArr,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.onPageChange,"on-page-size-change":t.onPageSizeChange}}):t._e()],1)],1),e("AddModel",{attrs:{isShow:t.showModel,isEdit:t.showEdit,item:t.selectItem},on:{editEvent:t.handleItemAdd,changeEvent:t.handleAddChangeEvent}}),e("BatchSet",{attrs:{isShow:t.showSet},on:{editEvent:t.handleItemSet,changeEvent:t.handleSetChangeEvent}})],1)},w=[],I=(a("4de4"),a("caad"),a("a15b"),a("d81d"),a("a434"),a("e9f5"),a("910d"),a("ab43"),a("b64b"),a("d3b7"),a("2532"),a("fa69")),k=function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{title:(t.isEdit?"编辑":"添加")+"资源信息",loading:t.loading},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showStatus,callback:function(e){t.showStatus=e},expression:"showStatus"}},[e("Form",{ref:"table",attrs:{model:t.localItem,"label-width":80,rules:t.ruleValidate}},[e("FormItem",{attrs:{label:"资源名称",prop:"name"}},[e("Input",{attrs:{placeholder:"请输入资源名称"},model:{value:t.localItem.name,callback:function(e){t.$set(t.localItem,"name",e)},expression:"localItem.name"}})],1),e("FormItem",{attrs:{label:"资源路径",prop:"path"}},[e("Input",{attrs:{placeholder:"请输入资源路径"},model:{value:t.localItem.path,callback:function(e){t.$set(t.localItem,"path",e)},expression:"localItem.path"}})],1),e("FormItem",{attrs:{label:"请求类型",prop:"method"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.localItem.method,callback:function(e){t.$set(t.localItem,"method",e)},expression:"localItem.method"}},[e("Option",{attrs:{value:"post"}},[t._v("POST")]),e("Option",{attrs:{value:"get"}},[t._v("GET")]),e("Option",{attrs:{value:"delete"}},[t._v("DELETE")]),e("Option",{attrs:{value:"update"}},[t._v("UPDATE")])],1)],1),e("FormItem",{attrs:{label:"资源类型",prop:"type"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.localItem.type,callback:function(e){t.$set(t.localItem,"type",e)},expression:"localItem.type"}},[e("Option",{attrs:{value:"api"}},[t._v("接口")]),e("Option",{attrs:{value:"btn"}},[t._v("按钮")])],1)],1),e("FormItem",{attrs:{label:"资源描述"}},[e("Input",{attrs:{type:"textarea",placeholder:"请输入资源描述"},model:{value:t.localItem.regmark,callback:function(e){t.$set(t.localItem,"regmark",e)},expression:"localItem.regmark"}})],1)],1)],1)],1)},$=[],x={props:{isEdit:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1},item:{type:Object,default:function(){}}},watch:{item:function(t,e){this.localItem=Object(r["a"])({},t)},isShow:function(){this.showStatus=this.isShow}},data:function(){return{loading:!0,showStatus:!1,localItem:{name:"",path:"",method:"",type:"",regmark:""},ruleValidate:{name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],path:[{required:!0,message:"请输入资源路径",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"blur"}],type:[{required:!0,message:"请选择资源类型",trigger:"blur"}]}}},mounted:function(){},methods:{ok:function(){var t=this;this.$refs.table.validate((function(e){e?(t.loading=!1,t.$emit("changeEvent",!1),t.$emit("editEvent",Object(r["a"])({},t.localItem)),setTimeout((function(){t.$refs.table.resetFields()}),0),t.$Message.info("添加成功！")):(t.loading=!1,t.$nextTick((function(){return t.loading=!0})),t.$Message.error("请检查输入数据"))}))},cancel:function(){this.$refs.table.resetFields(),this.$emit("changeEvent",!1),this.$Message.info("取消编辑！")}}},C=x,S=Object(d["a"])(C,k,$,!1,null,null,null),_=S.exports,E=function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{title:"批量设置"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showStatus,callback:function(e){t.showStatus=e},expression:"showStatus"}},[e("Form",{ref:"table",attrs:{model:t.localItem,"label-width":80}},[e("FormItem",{attrs:{label:"请求类型"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.localItem.method,callback:function(e){t.$set(t.localItem,"method",e)},expression:"localItem.method"}},[e("Option",{attrs:{value:"post"}},[t._v("POST")]),e("Option",{attrs:{value:"get"}},[t._v("GET")]),e("Option",{attrs:{value:"delete"}},[t._v("DELETE")]),e("Option",{attrs:{value:"update"}},[t._v("UPDATE")])],1)],1),e("FormItem",{attrs:{label:"资源类型"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.localItem.type,callback:function(e){t.$set(t.localItem,"type",e)},expression:"localItem.type"}},[e("Option",{attrs:{value:"api"}},[t._v("接口")]),e("Option",{attrs:{value:"btn"}},[t._v("按钮")])],1)],1)],1)],1)],1)},M=[],O={props:{isShow:{type:Boolean,default:!1}},watch:{isShow:function(){this.showStatus=this.isShow}},data:function(){return{showStatus:!1,localItem:{method:"",type:""}}},methods:{ok:function(){this.$emit("changeEvent",!1);for(var t={},e=0,a=Object.keys(this.localItem);e<a.length;e++){var n=a[e];""!==this.localItem[n]&&(t[n]=this.localItem[n])}this.$emit("editEvent",t),this.$Message.info("设置成功！")},cancel:function(){this.$refs.table.resetFields(),this.$emit("changeEvent",!1),this.$Message.info("取消设置！")}}},j=O,B=Object(d["a"])(j,E,M,!1,null,null,null),T=B.exports,F={props:{columns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1}},components:{Tables:I["a"],AddModel:_,BatchSet:T},data:function(){return{showModel:!1,showEdit:!1,showSet:!1,page:1,limit:10,total:0,pageArr:[10,20,30,50,100],selectItem:{},selection:[],current:0,localData:[]}},watch:{localData:function(){this.$emit("on-change",this.localData)},tableData:function(t,e){this.localData=t}},methods:{handleRowEdit:function(t,e){this.isEdit?(this.selectItem=t,this.current=e,this.showEdit=!0,this.showModel=!0):this.$Message.error("非编辑状态，无法进行修改！")},handleRowRemove:function(t,e){var a=this;this.isEdit?this.$Modal.confirm({title:"确定删除吗？",content:"删除".concat(t.name,"的名称，请求路径").concat(t.path,"资源？"),onOk:function(){a.localData.splice(e,1)},onCancel:function(){a.$Message.info("取消操作！")}}):this.$Message.error("非编辑状态，无法进行删除！")},handleSelect:function(t){this.selection=t},handleSearch:function(){},handleDeleteBatch:function(){var t=this;if(0!==this.selection.length){var e=this.selection.map((function(t){return t.name})).join(",");this.$Modal.confirm({title:"确定删除吗？",content:"删除".concat(e,"的资源吗？"),onOk:function(){var e=t.selection.map((function(t){return t.name}));t.localData=t.localData.filter((function(t){return!e.includes(t.name)})),t.$Message.success("删除成功！")},onCancel:function(){t.$Message.info("取消操作！")}})}else this.$Message.info("请选择需要删除的数据！")},handleSetBatch:function(){0!==this.selection.length?this.showSet=!0:this.$Message.info("请选择需要设置的数据！")},handleAdd:function(){this.showModel=!0},handleItemAdd:function(t){this.showEdit?(this.localData.splice(this.current,1,t),this.showEdit=!1):this.localData.push(t)},handleItemSet:function(t){var e=this,a=this.selection.map((function(t){return t.name})).join(",");this.$Modal.confirm({title:"确定设置吗？",content:"修改".concat(a,"的资源吗？"),onOk:function(){var a=e.selection.map((function(t){return t.name}));e.localData.map((function(n,i){var o=Object(r["a"])({},n);if(a.includes(o.name)){for(var s=0,l=Object.keys(t);s<l.length;s++){var c=l[s];o[c]=t[c]}e.$set(e.localData,i,o)}})),e.$Message.success("批量设置成功！")},onCancel:function(){e.$Message.info("取消操作！")}})},handleAddChangeEvent:function(t){this.showModel=t},handleSetChangeEvent:function(t){this.showSet=t},onPageChange:function(t){this.page=t},onPageSizeChange:function(t){this.limit=t}}},R=F,N=(a("2a42"),Object(d["a"])(R,D,w,!1,null,"d59c2b72",null)),A=N.exports,z=a("c276"),P=a("50fc"),V={components:{TreeMenu:m,MenuForm:y,OperationsTable:A},data:function(){return{isEdit:!1,type:"",selectNode:[],menuData:[],formData:{title:"",name:"",path:"",component:"",hideInBread:!1,hideInMenu:!1,notCache:!1,icon:"",sort:0,redirect:"",type:"menu",link:"",operations:[]},columns:[{type:"selection",width:60,align:"center",hidden:!0},{title:"资源名称",key:"name",search:{type:"input"},align:"center"},{title:"资源路径",key:"path",search:{type:"input"},align:"center"},{title:"请求类型",key:"method",search:{type:"input"},align:"center",render:function(t,e){return t("div",e.row.method.toUpperCase())}},{title:"资源类型",key:"type",search:{type:"radio",options:[{key:"全部",value:""},{key:"接口",value:"api"},{key:"按钮",value:"btn"}]},align:"center"},{title:"资源描述",key:"regmark",search:{type:"input"}},{title:"设置",key:"settings",slot:"action",hidden:!0,fixed:"right",width:100,align:"center"}],tableData:[]}},mounted:function(){this._getMenu()},methods:{_getMenu:function(){var t=this;P["d"].use("get").then((function(e){0===e.code&&(t.menuData=e.data)}))},handleTreeChange:function(t){0!==t.length&&(this.isEdit?this.$Message.error("当前为编辑状态，请取消编辑后查看！"):(this.selectNode=t,this.formData=t[0],this.tableData=Object(o["a"])(t[0].operations)))},addMenu:function(t){this.initForm(),this.type=t,this.isEdit=!0},editMenu:function(t){this.isEdit=!0,this.formData=t},deleteMenu:function(t){var e=this,a=Object(z["i"])(this.menuData,t);a.nodeKey!==t.nodeKey?P["d"].use("update",a).then((function(t){0===t.code&&e.$Message.success("删除子菜单成功！")})):P["d"].use("delete",{_id:a._id}).then((function(t){0===t.code&&e.$Message.success("删除菜单成功！")})),this.menuData=Object(z["a"])(this.menuData,t)},submit:function(t){var e=this,a=Object(z["i"])(this.menuData,this.selectNode[0]);if(this.tableData.length>0?t.operations=this.tableData:t.operations=[],"bro"===this.type)if(0===this.menuData.length)P["d"].use("add",t).then((function(t){0===t.code&&(e.menuData.push(t.data),e.$Message.success("添加菜单成功！"),e.menuData=Object(z["z"])(Object(o["a"])(e.menuData)),e.initForm())}));else{var n=this.selectNode[0];this.menuData=Object(z["o"])(this.menuData,n,t),a.nodeKey===n.nodeKey?P["d"].use("add",t).then((function(t){0===t.code&&(e.menuData=Object(z["z"])(Object(o["a"])(e.menuData)),e.$Message.success("添加菜单成功！"))})):(a=Object(z["i"])(this.menuData,n),console.log(a),P["d"].use("update",a).then((function(t){0===t.code&&(e.$Message.success("添加菜单成功！"),e.menuData=Object(z["z"])(Object(o["a"])(e.menuData)))})))}else if("child"===this.type){if("undefined"===typeof this.selectNode[0].children)this.$set(this.selectNode[0],"children",[t]);else{var i=[].concat(Object(o["a"])(this.selectNode[0].children),[t]);i=Object(z["A"])(i,"sort"),this.$set(this.selectNode[0],"children",i)}a=Object(z["i"])(this.menuData,this.selectNode[0]),P["d"].use("update",a).then((function(t){0===t.code&&(e.menuData=Object(z["z"])(Object(o["a"])(e.menuData)),e.$Message.success("添加子菜单成功！"))}))}else this.menuData=Object(z["B"])(this.menuData,t),this.$set(this.selectNode,0,t),a=Object(z["i"])(this.menuData,this.selectNode[0]),P["d"].use("update",a).then((function(t){0===t.code&&(e.menuData=Object(z["z"])(Object(o["a"])(e.menuData)),e.handleTreeChange(e.selectNode),e.$Message.success("更新菜单成功！"))}))},initForm:function(){this.isEdit=!1,this.type="",this.formData={title:"",name:"",path:"",component:"",hideInBread:!1,hideInMenu:!1,notCache:!1,icon:"",sort:0,link:"",redirect:"",type:"menu",operations:[]},this.tableData=[]},handleTableChange:function(t){this.tableData=t}}},K=V,q=Object(d["a"])(K,n,i,!1,null,null,null);e["default"]=q.exports},"8f51":function(t,e,a){},"8ff4":function(t,e,a){},9911:function(t,e,a){"use strict";var n=a("23e7"),i=a("857a"),o=a("af03");n({target:"String",proto:!0,forced:o("link")},{link:function(t){return i(this,"a","href",t)}})},"9ed3":function(t,e,a){},"9ee6":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),i=a("e330"),o=a("44ad"),s=a("fc6a"),l=a("a640"),r=i([].join),c=o!==Object,u=c||!l("join",",");n({target:"Array",proto:!0,forced:u},{join:function(t){return r(s(this),void 0===t?",":t)}})},af03:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bf26:function(t,e,a){"use strict";a("8ff4")},fa69:function(t,e,a){"use strict";a("caad"),a("2532");var n=function(){var t=this,e=t._self._c;return e("div",[t.searchable&&"top"===t.searchPlace?e("div",{staticClass:"search-con search-con-top"},[e("Select",{staticClass:"search-col",on:{"on-select":t.handleSelect}},[t._l(t.columns,(function(a,n){return[a.hidden?t._e():e("Option",{key:"search-col-".concat(a.key),attrs:{value:n}},[t._v(t._s(a.title))])]}))],2),e("Search",{attrs:{value:t.searchValue,item:t.chooseItem},on:{changeEvent:t.handleSearchInput}}),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[e("Icon",{attrs:{type:"md-search"}}),t._v("  搜索 ")],1),t._t("table-header")],2):t._e(),e("Table",{ref:"tablesMain",attrs:{data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand},scopedSlots:t._u([{key:"action",fn:function(a){var n=a.row,i=a.index,o=a.column;return[!o.options||o.options.includes("edit")?e("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-build",size:"22"},on:{click:function(e){return e.stopPropagation(),t.editRow(n,i)}}}):t._e(),!o.options||o.options.includes("delete")?e("Icon",{attrs:{type:"md-trash",size:"22"},on:{click:function(e){return e.stopPropagation(),t.removeRow(n,i)}}}):t._e()]}}])},[t._t("header",null,{slot:"header"}),t._t("footer",null,{slot:"footer"}),t._t("loading",null,{slot:"loading"})],2),t.searchable&&"bottom"===t.searchPlace?e("div",{staticClass:"search-con search-con-top"},[e("Select",{staticClass:"search-col",model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l(t.columns,(function(a){return e("Option",{key:"search-col-".concat(a.key),attrs:{value:a.key}},["handle"!==a.key?[t._v(t._s(a.title))]:t._e()],2)})),1),e("Input",{staticClass:"search-input",attrs:{placeholder:"输入关键字搜索"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),e("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[e("Icon",{attrs:{type:"search"}}),t._v("  搜索 ")],1)],1):t._e(),e("a",{staticStyle:{display:"none",width:"0px",height:"0px"},attrs:{id:"hrefToExportTable"}})],1)},i=[],o=(a("99af"),a("d81d"),a("14d9"),a("e9f5"),a("7d54"),a("ab43"),a("a9e3"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"tables-edit-outer"},[t.isEditting?e("div",{staticClass:"tables-editting-con"},[e("Input",{staticClass:"tables-edit-input",attrs:{value:t.value},on:{input:t.handleInput}}),e("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:t.saveEdit}},[e("Icon",{attrs:{type:"md-checkmark"}})],1),e("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:t.canceltEdit}},[e("Icon",{attrs:{type:"md-close"}})],1)],1):e("div",{staticClass:"tables-edit-con"},[e("span",{staticClass:"value-con"},[t._v(t._s(t.value))]),t.editable?e("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{type:"text"},on:{click:t.startEdit}},[e("Icon",{attrs:{type:"md-create"}})],1):t._e()],1)])}),s=[],l={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(t){this.$emit("input",t)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},r=l,c=(a("bf26"),a("2877")),u=Object(c["a"])(r,o,s,!1,null,null,null),d=u.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},["radio"===t.item.type?[e("RadioGroup",{attrs:{value:t.inputValue},on:{"on-change":t.handleChange}},t._l(t.finalRadio,(function(a,n){return e("Radio",{key:"search-radio-"+n,attrs:{label:a.value}},[e("span",[t._v(t._s(a.key))])])})),1)]:"date"===t.item.type?[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"请选择时间段"},on:{"on-change":t.handleChange}})]:"select"===t.item.type?[e("Select",{staticStyle:{width:"260px"},attrs:{multiple:"",value:t.inputValue},on:{"on-change":t.handleChange},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.item.options,(function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.key))])})),1)]:[e("Input",{staticClass:"search-input",attrs:{value:t.inputValue,clearable:"",placeholder:"输入关键字搜索"},on:{"on-change":t.handleChange}})]],2)},m=[],p={props:{item:{type:Object,default:function(){}},value:{type:[String,Array,Number],default:""}},data:function(){return{selection:[],radioOptions:[{key:"全部",value:""},{key:"否",value:"0"},{key:"是",value:"1"}]}},computed:{finalRadio:function(){var t={};return"radio"===this.item.type&&(t=this.item.options?this.item.options:this.radioOptions),t},inputValue:function(){return this.value}},methods:{handleChange:function(t){this.$emit("changeEvent",t)}}},f=p,v=(a("6eab"),Object(c["a"])(f,h,m,!1,null,"28b526e9",null)),g=v.exports,b=(a("4de4"),a("910d"),{delete:function(t,e,a){return t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},on:{"on-ok":function(){a.$emit("on-delete",e),a.$emit("input",e.tableData.filter((function(t,a){return a!==e.row.initRowIndex})))}}},[t("Button",{props:{type:"text",ghost:!0}},[t("Icon",{props:{type:"md-trash",size:18,color:"#000000"}})])])}}),y=b,D=(a("30d9"),{name:"Tables",components:{Search:g},props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"}},data:function(){return{chooseItem:{type:"input"},insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},methods:{handleSelect:function(t){var e=t.value;this.chooseItem=this.columns[e].search,this.searchKey=this.columns[e].key,this.searchValue=["select","date"].includes(this.chooseItem.type)?[]:""},suportEdit:function(t,e){var a=this;return t.render=function(t,e){return t(d,{props:{params:e,value:a.insideTableData[e.index][e.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(t){a.edittingText=t},"on-start-edit":function(t){a.edittingCellId="editting-".concat(t.index,"-").concat(t.column.key),a.$emit("on-start-edit",t)},"on-cancel-edit":function(t){a.edittingCellId="",a.$emit("on-cancel-edit",t)},"on-save-edit":function(t){a.value[t.row.initRowIndex][t.column.key]=a.edittingText,a.$emit("input",a.value),a.$emit("on-save-edit",Object.assign(t,{value:a.edittingText})),a.edittingCellId=""}}})},t},surportHandle:function(t){var e=this,a=t.options||[],n=[];a.forEach((function(t){y[t]&&n.push(y[t])}));var i=t.button?[].concat(n,t.button):n;return t.render=function(t,a){return a.tableData=e.value,t("div",i.map((function(n){return n(t,a,e)})))},t},handleColumns:function(t){var e=this;this.insideColumns=t.map((function(t,a){var n=t;return n.editable&&(n=e.suportEdit(n,a)),"handle"===n.key&&(n=e.surportHandle(n)),n}))},setDefaultSearchKey:function(){this.searchKey="handle"!==this.columns[0].key?this.columns[0].key:this.columns.length>1?this.columns[1].key:""},handleSearch:function(){this.$emit("searchEvent",{item:this.searchKey,search:this.searchValue})},handleSearchInput:function(t){"input"===this.chooseItem.type?this.searchValue=t.target.value:this.searchValue=t},handleTableData:function(){this.insideTableData=this.value.map((function(t,e){var a=t;return a.initRowIndex=e,a}))},exportCsv:function(t){this.$refs.tablesMain.exportCsv(t)},clearCurrentRow:function(){this.$refs.talbesMain.clearCurrentRow()},onCurrentChange:function(t,e){this.$emit("on-current-change",t,e)},onSelect:function(t,e){this.$emit("on-select",t,e)},onSelectCancel:function(t,e){this.$emit("on-select-cancel",t,e)},onSelectAll:function(t){this.$emit("on-select-all",t)},onSelectionChange:function(t){this.$emit("on-selection-change",t)},onSortChange:function(t,e,a){this.$emit("on-sort-change",t,e,a)},onFilterChange:function(t){this.$emit("on-filter-change",t)},onRowClick:function(t,e){this.$emit("on-row-click",t,e)},onRowDblclick:function(t,e){this.$emit("on-row-dblclick",t,e)},onExpand:function(t,e){this.$emit("on-expand",t,e)},editRow:function(t,e){this.$emit("on-row-edit",t,e)},removeRow:function(t,e){this.$emit("on-row-remove",t,e)}},watch:{columns:function(t){this.handleColumns(t),this.setDefaultSearchKey()},value:function(t){this.handleTableData()}},mounted:function(){this.handleColumns(this.columns),this.setDefaultSearchKey(),this.handleTableData()}}),w=D,I=Object(c["a"])(w,n,i,!1,null,null,null),k=I.exports;e["a"]=k}}]);
//# sourceMappingURL=chunk-3b62d88f.46d6190f.js.map